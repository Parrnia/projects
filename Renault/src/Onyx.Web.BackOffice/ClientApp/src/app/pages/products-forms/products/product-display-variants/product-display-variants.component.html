<div class="row">
  <div class="col-lg-12">
    <div class="card">
      <div class="card-header">
        <h4 class="card-title mb-0 flex-grow-1">
          لیست نمایش های محصول
          <strong style="color: rgb(11, 51, 11)">{{
            product.localizedName
            }}</strong>
        </h4>
      </div>
      <!-- end card header -->

      <div class="card-body">
        <div class="mb-lg-3 row">
          <div class="col-lg-8">
            <div class="d-flex flex-wrap gap-2 mb-3 mb-lg-0">
              <button (click)="openInsertModal()" type="button" class="btn btn-outline-primary">
                <i class="icon-content-blue las la-plus label-icon align-middle fs-20"></i>
              </button>
              <button (click)="deleteMultiple(deleteModel)" type="button" class="btn btn-outline-primary">
                <i class="icon-content-red las la-trash label-icon align-middle fs-20"></i>
              </button>
            </div>
          </div>
          <!--end col-->
        </div>
        <!--end row-->
        

                <div class="search-box d-inline-block mb-2">
                    <input type="text" class="form-control search" placeholder="جستجو ..."
                        [(ngModel)]="service.searchTerm">
                    <i class="ri-search-line search-icon"></i>
                </div>

        <div class="table-responsive">
          <table class="table table-gridjs">
            <thead>
              <tr>
                <th style="width: 4px"></th>
                <th>نام</th>
                <th>پرفروش</th>
                <th>ویژه</th>
                <th>آخرین</th>
                <th>جدید</th>
                <th>محبوب</th>
                <th>حراج</th>
                <th>پیشنهاد ویژه</th>
                <th>بالاترین امتیاز</th>
                <th>قابل نمایش</th>

                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of gridjsList$ | async" id="lj_{{ data.id }}">
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="checkAll" [checked]="isChecked(data.id)"
                      (change)="toggleCheckbox(data.id)" />
                  </div>
                </td>
                <td>
                  <ngb-highlight [result]="data.name" [term]="service.searchTerm"></ngb-highlight>
                </td>
                <td>
                  <strong *ngIf="data.isBestSeller != null && data.isBestSeller == true">بلی</strong>
                  <strong *ngIf="data.isBestSeller == null || data.isBestSeller == false">خیر</strong>
                </td>
                <td>
                  <strong *ngIf="data.isFeatured != null && data.isFeatured == true">بلی</strong>
                  <strong *ngIf="data.isFeatured == null || data.isFeatured == false">خیر</strong>
                </td>
                <td>
                  <strong *ngIf="data.isLatest != null && data.isLatest == true">بلی</strong>
                  <strong *ngIf="data.isLatest == null || data.isLatest == false">خیر</strong>
                </td>
                <td>
                  <strong *ngIf="data.isNew != null && data.isNew == true">بلی</strong>
                  <strong *ngIf="data.isNew == null || data.isNew == false">خیر</strong>
                </td>
                <td>
                  <strong *ngIf="data.isPopular != null && data.isPopular == true">بلی</strong>
                  <strong *ngIf="data.isPopular == null || data.isPopular == false">خیر</strong>
                </td>
                <td>
                  <strong *ngIf="data.isSale != null && data.isSale == true">بلی</strong>
                  <strong *ngIf="data.isSale == null || data.isSale == false">خیر</strong>
                </td>
                <td>
                  <strong *ngIf="data.isSpecialOffer != null && data.isSpecialOffer == true">بلی</strong>
                  <strong *ngIf="data.isSpecialOffer == null || data.isSpecialOffer == false">خیر</strong>
                </td>
                <td>
                  <strong *ngIf="data.isTopRated != null && data.isTopRated == true">بلی</strong>
                  <strong *ngIf="data.isTopRated == null || data.isTopRated == false">خیر</strong>
                </td>
                <td>
                  <strong *ngIf="data.isActive != null && data.isActive == true">بلی</strong>
                  <strong *ngIf="data.isActive == null || data.isActive == false">خیر</strong>
                </td>
                <td data-column-id="actions" class="hstack gap-3 flex-wrap gridjs-td">
                  <a style="cursor: pointer" (click)="edit(data)" _ngcontent-agu-c388="">
                    <i _ngcontent-agu-c388="" class="las la-edit label-icon align-middle fs-22"></i>
                  </a>
                  <!-- <a _ngcontent-agu-c388="" (click)="openDeleteConfirmationModal(data.id)"
                                        class="link-danger fs-15">
                                        <i _ngcontent-agu-c388="" class="ri-delete-bin-line"></i>
                                    </a> -->
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="row justify-content-md-between align-items-md-center">
          <div class="col-sm-12 col-md-5">
            <div class="dataTables_info mb-2" id="tickets-table_info" role="status" aria-live="polite">
              نمایش
              {{ service.totalRecords !== 0 ? service.startIndex : 0 }} تا
              {{ service.endIndex }} از {{ service.totalRecords }}
              داده
            </div>
          </div>
          <!-- Pagination -->
          <div class="col-sm-12 col-md-5">
            <div class="text-md-right float-md-end gridjs-pagination">
              <ngb-pagination [collectionSize]="(total$ | async)!" [maxSize]="4" [(page)]="service.page"
                [pageSize]="service.pageSize">
              </ngb-pagination>
            </div>
          </div>
          <!-- End Pagination -->
        </div>
      </div>
      <!-- end card-body -->
    </div>
    <!-- end card -->
  </div>
  <!-- end col -->
</div>
<!-- end row -->

<ng-template #deleteModel let-modal>
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="btn-close"
        (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <div class="mt-2 text-center">
        <lord-icon src="https://cdn.lordicon.com/gsqxdxog.json" trigger="loop"
          colors="primary:#405189,secondary:#f06548" style="width: 90px; height: 90px"></lord-icon>
        <div class="mt-4 pt-2 fs-15 mx-4 mx-sm-5">
          <h4>از حذف آیتم (های) انتخاب شده مطمئن هستید؟</h4>
          <p class="text-muted mx-4 mb-0">
            تایید حذف به منزله حذف داده از پایگاه داده می باشد
          </p>
        </div>
      </div>
      <div class="d-flex gap-2 justify-content-center mt-4 mb-2">
        <button class="btn btn-link link-success fw-medium text-decoration-none" data-bs-dismiss="modal"
          (click)="modal.close('Close click')">
          <i class="ri-close-line me-1 align-middle"></i> انصراف
        </button>
        <button type="button" class="btn w-sm btn-danger" id="delete-product" (click)="deleteItems()"
          [class.btn-loading]="inProgress" [disabled]="inProgress">
          <ng-container *ngIf="!inProgress; else loadingTemplate">
            حذف کن
          </ng-container>
          <ng-template #loadingTemplate>
            <span class="visually-hidden">Loading...</span>
          </ng-template>
        </button>
      </div>
    </div>
  </div>
  <!-- /.modal-content -->
</ng-template>

<!-- Delete Modal -->
<ng-template role="document" #formModal let-modal>
  <form class="row gy-1" [formGroup]="myForm" (ngSubmit)="onSubmit()">
    <div class="modal-header">
      <h4 class="modal-title">نام نمایشی</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss(); this.handleCloseFormModal()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="row modal-body">

      <div class="mb-3 col-md-12">
        <label for="name" class="form-label">نام نمایشی</label>
        <input type="text" class="form-control" id="name" formControlName="name"
          [ngClass]="{ 'is-invalid': form.name.touched && form.name.invalid }" />
        <div *ngIf="form.name.touched && form.name.errors?.required" class="invalid-feedback">
          وارد کردن نام نمایشی اجباریست
        </div>
      </div>
      <!--end col-->

      <div class="form-check form-switch mb-3 col-xxl-6 col-md-6 w-auto">
        <input class="form-check-input" type="checkbox" role="switch" id="isBestSeller" formControlName="isBestSeller"
          [ngClass]="{
            'is-invalid': form.isBestSeller.touched && form.isBestSeller.invalid
          }" />
        <label class="form-check-label" for="isBestSeller">پرفروش</label>
      </div>
      <div class="form-check form-switch mb-3 col-xxl-6 col-md-6 w-auto">
        <input class="form-check-input" type="checkbox" role="switch" id="isFeatured" formControlName="isFeatured"
          [ngClass]="{
            'is-invalid': form.isFeatured.touched && form.isFeatured.invalid
          }" />
        <label class="form-check-label" for="isFeatured">ویژه</label>
      </div>
      <div class="form-check form-switch mb-3 col-xxl-6 col-md-6 w-auto">
        <input class="form-check-input" type="checkbox" role="switch" id="isLatest" formControlName="isLatest"
          [ngClass]="{
            'is-invalid': form.isLatest.touched && form.isLatest.invalid
          }" />
        <label class="form-check-label" for="isLatest">آخرین</label>
      </div>
      <div class="form-check form-switch mb-3 col-xxl-6 col-md-6 w-auto">
        <input class="form-check-input" type="checkbox" role="switch" id="isNew" formControlName="isNew"
          [ngClass]="{
            'is-invalid': form.isNew.touched && form.isNew.invalid
          }" />
        <label class="form-check-label" for="isNew">جدید</label>
      </div>
      <div class="form-check form-switch mb-3 col-xxl-6 col-md-6 w-auto">
        <input class="form-check-input" type="checkbox" role="switch" id="isPopular" formControlName="isPopular"
          [ngClass]="{
            'is-invalid': form.isPopular.touched && form.isPopular.invalid
          }" />
        <label class="form-check-label" for="isPopular">محبوب</label>
      </div>
      <div class="form-check form-switch mb-3 col-xxl-6 col-md-6 w-auto">
        <input class="form-check-input" type="checkbox" role="switch" id="isSale" formControlName="isSale"
          [ngClass]="{
            'is-invalid': form.isSale.touched && form.isSale.invalid
          }" />
        <label class="form-check-label" for="isSale">حراج</label>
      </div>
      <div class="form-check form-switch mb-3 col-xxl-6 col-md-6 w-auto">
        <input class="form-check-input" type="checkbox" role="switch" id="isSpecialOffer" formControlName="isSpecialOffer"
          [ngClass]="{
            'is-invalid': form.isSpecialOffer.touched && form.isSpecialOffer.invalid
          }" />
        <label class="form-check-label" for="isSpecialOffer">پیشنهاد ویژه</label>
      </div>
      <div class="form-check form-switch mb-3 col-xxl-6 col-md-6 w-auto">
        <input class="form-check-input" type="checkbox" role="switch" id="isTopRated" formControlName="isTopRated"
          [ngClass]="{
            'is-invalid': form.isTopRated.touched && form.isTopRated.invalid
          }" />
        <label class="form-check-label" for="isTopRated">بالاترین امتیاز</label>
      </div>
      <div class="form-check form-switch mb-3 col-xxl-6 col-md-6 w-auto">
        <input class="form-check-input" type="checkbox" role="switch" id="isActive" formControlName="isActive"
          [ngClass]="{
            'is-invalid': form.isActive.touched && form.isActive.invalid
          }" />
        <label class="form-check-label" for="isActive">قابل نمایش</label>
      </div>


    </div>
    <div class="modal-footer">
      <button type="button" (click)="modal.dismiss('Cross click'); this.handleCloseFormModal()" style="margin-left: 5px"
        class="btn btn-warning">
        انصراف
      </button>
      <button type="button" (click)="resetForm()" style="margin-left: 5px" class="btn btn-warning">
        پاک کردن فرم
      </button>
      <button class="btn btn-primary" [class.btn-loading]="inProgress" [disabled]="inProgress" type="submit">
        <ng-container *ngIf="!inProgress; else loadingTemplate">
          ذخیره
        </ng-container>
        <ng-template #loadingTemplate>
          <span class="visually-hidden">Loading...</span>
        </ng-template>
      </button>
    </div>
  </form>
</ng-template>